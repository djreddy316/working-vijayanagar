{"ast":null,"code":"var _jsxFileName = \"D:\\\\vijayanagar-working\\\\working-vijayanagar\\\\src\\\\components\\\\reports\\\\Reports.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from \"react-redux\";\nimport Paper from '@material-ui/core/Paper';\nimport axios from 'axios';\nimport { forwardRef } from 'react';\nimport { DatePicker } from \"antd\"; //import {Container, Row, Col} from 'reactstrap';\n\nimport { Link } from \"react-router-dom\";\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Search, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt } from \"@material-ui/icons\";\nimport DateRangePicker from 'react-bootstrap-daterangepicker'; // you will need the css that comes with bootstrap@3. if you are using\n// a tool like webpack, you can do the following:\n\nimport 'bootstrap/dist/css/bootstrap.css'; // you will also need the css that comes with bootstrap-daterangepicker\n\nimport 'bootstrap-daterangepicker/daterangepicker.css';\nimport { moment } from \"moment\";\nimport ExportCSV from \"./exportToCSV\";\nimport Spinner from \"../common/Spinner\";\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 37\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 39\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 39\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 40\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 45\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 38\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 40\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 40\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 43\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 42\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 42\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 46\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 45\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 40\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 43\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 49\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 44\n    }\n  })))\n};\nexport default function Reports({\n  history\n}) {\n  const url = \" https://7fidxh52z5.execute-api.ap-south-1.amazonaws.com/prod/getreportdata\";\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filename, setFilename] = useState(\"\");\n  const [localvalue, setLocalvalue] = useState(\"\");\n  const useStyles = makeStyles({\n    table: {\n      minWidth: 650\n    }\n  });\n  useEffect(() => {\n    if (localStorage.getItem(\"role_id\") == undefined) history.push(\"/login\");else setLocalvalue(localStorage.getItem(\"role_id\"));\n  }, []);\n  const classes = useStyles();\n\n  function day_of_the_month(d) {\n    return (d < 10 ? '0' : '') + d;\n  }\n\n  useEffect(() => {\n    var today = new Date();\n    let datetoday = today.getFullYear() + '-' + day_of_the_month(today.getMonth() + 1) + '-' + today.getDate(); //let start = moment().format('YYYY-MM-DD');\n    //let end = moment().format('YYYY-MM-DD');\n\n    let todaydate = today.getDate() + '-' + day_of_the_month(today.getMonth() + 1) + '-' + today.getFullYear();\n    setFilename('TallyChecker_Report_' + todaydate);\n    console.log(datetoday);\n    axios.post(url, {\n      \"from\": datetoday,\n      \"to\": datetoday\n    }).then(json => setData(json.data.data));\n    setLoading(false);\n  }, []);\n\n  const handleEvent = (event, picker) => {\n    console.log(picker.startDate);\n  };\n\n  const handleCallback = (start, end, label) => {\n    let from = start.format('YYYY-MM-DD');\n    let to = end.format('YYYY-MM-DD');\n    axios.post(url, {\n      \"from\": from,\n      \"to\": to\n    }).then(json => setData(json.data.data));\n    console.log(\"from: \", from);\n    console.log(\"to :\", to);\n    setLoading(false);\n  };\n\n  const styles = {\n    width: 260,\n    display: \"block\",\n    marginBottom: 10\n  };\n  return !loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: \"white\",\n      fontSize: \"36px\",\n      marginLeft: \"25px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 3\n    }\n  }, \"Loading Tally check Report \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"10%\",\n      marginTop: \"20px\",\n      zIndex: \"999\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 1\n    }\n  }, \" \", /*#__PURE__*/React.createElement(ExportCSV, {\n    csvData: data,\n    fileName: filename,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 91\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"40%\",\n      marginTop: \"-60px\",\n      maxWidth: \"300px\",\n      zIndex: \"999\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    style: {\n      color: \"white\",\n      fontSize: \"16px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 1\n    }\n  }, \" Chose Date range to get the Report \"), /*#__PURE__*/React.createElement(DateRangePicker, {\n    onEvent: handleEvent,\n    onCallback: handleCallback,\n    size: \"sm\",\n    style: styles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 3\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"98%\",\n      marginTop: \"-50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(MaterialTable, {\n    style: {\n      background: \"#0F1322\",\n      color: \"#FFF\"\n    },\n    className: classes.table,\n    size: \"small\",\n    \"aria-label\": \"a dense table\",\n    icons: tableIcons,\n    columns: [{\n      title: 'Yard',\n      field: 'yard'\n    }, {\n      title: 'SAP Rakenumber',\n      field: 'rakeno'\n    }, {\n      title: 'SAP Wagon Number',\n      field: 'wagonno'\n    }, {\n      title: 'Loaded Wagon Number',\n      field: 'wagonnumber'\n    }, {\n      title: 'SAP Batch Number',\n      field: 'batchno'\n    }, {\n      title: 'Loaded Batch Number',\n      field: 'batchnumber'\n    }, {\n      title: 'Weight',\n      field: 'batchwt'\n    }, {\n      title: 'Size',\n      field: 'size'\n    }, {\n      title: 'Scanned By',\n      field: 'scannedby'\n    }, {\n      title: 'Image',\n      field: 'url',\n      render: rowData => {\n        return rowData.url ? /*#__PURE__*/React.createElement(\"img\", {\n          src: rowData.url,\n          style: {\n            height: 50\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 77\n          }\n        }) : \"\";\n      }\n    }, {\n      title: 'Anamoly',\n      field: 'anamoly'\n    }, {\n      title: 'Action',\n      field: ''\n    }, {\n      title: 'Taken By',\n      field: ''\n    }, {\n      title: 'Action time',\n      field: ''\n    }],\n    data: data,\n    options: {\n      search: true,\n      searchFieldStyle: {\n        maxWidth: \"30%\",\n        marginLeft: \"65%\"\n      },\n      pageSize: 50,\n      pageSizeOptions: [50, 100, 200, 300],\n      showTitle: false,\n      toolbar: true,\n      paging: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 2\n    }\n  })))) : /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  });\n}","map":{"version":3,"sources":["D:/vijayanagar-working/working-vijayanagar/src/components/reports/Reports.js"],"names":["React","useState","useEffect","makeStyles","connect","Paper","axios","forwardRef","DatePicker","Link","MaterialTable","AddBox","ArrowDownward","Search","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","DateRangePicker","moment","ExportCSV","Spinner","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","Reports","history","url","data","setData","loading","setLoading","filename","setFilename","localvalue","setLocalvalue","useStyles","table","minWidth","localStorage","getItem","undefined","push","classes","day_of_the_month","d","today","Date","datetoday","getFullYear","getMonth","getDate","todaydate","console","log","post","then","json","handleEvent","event","picker","startDate","handleCallback","start","end","label","from","format","to","styles","width","display","marginBottom","color","fontSize","marginLeft","marginTop","zIndex","position","maxWidth","background","title","field","render","rowData","height","search","searchFieldStyle","pageSize","pageSizeOptions","showTitle","toolbar","paging"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport Paper from '@material-ui/core/Paper';\r\nimport axios from 'axios';\r\nimport { forwardRef } from 'react';\r\nimport {DatePicker} from \"antd\";\r\n//import {Container, Row, Col} from 'reactstrap';\r\nimport { Link } from \"react-router-dom\";\r\nimport MaterialTable from \"material-table\";\r\nimport { AddBox, ArrowDownward, Search, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline,Edit,FilterList,FirstPage,LastPage,Remove,ViewColumn,SaveAlt } from \"@material-ui/icons\";\r\n\r\nimport DateRangePicker from 'react-bootstrap-daterangepicker';\r\n// you will need the css that comes with bootstrap@3. if you are using\r\n// a tool like webpack, you can do the following:\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n// you will also need the css that comes with bootstrap-daterangepicker\r\nimport 'bootstrap-daterangepicker/daterangepicker.css';\r\nimport {moment} from \"moment\";\r\nimport ExportCSV from \"./exportToCSV\";\r\nimport Spinner from  \"../common/Spinner\";\r\n\r\nconst tableIcons = {\r\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n    SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\r\n  };\r\n\r\nexport default function Reports({\r\n    history\r\n  }) {\r\n\r\n    const url = \" https://7fidxh52z5.execute-api.ap-south-1.amazonaws.com/prod/getreportdata\";\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filename,setFilename] = useState(\"\");\r\n\t\tconst [localvalue, setLocalvalue] = useState(\"\");\r\n    const useStyles = makeStyles({\r\n        table: {\r\n            minWidth: 650\r\n\t\t}\r\n    });\r\n\r\n     useEffect( () => {\r\n\t  if(localStorage.getItem(\"role_id\")  == undefined)\r\n\t\t\thistory.push(\"/login\")\r\n\telse\r\n      setLocalvalue(localStorage.getItem(\"role_id\") );\r\n   }, []);\r\n\t\r\n\tconst classes = useStyles();\r\n  \r\n  function day_of_the_month(d)\r\n{ \r\n  return (d < 10 ? '0' : '') + d;\r\n}\r\n\t\r\n\t\t\r\n    useEffect(() => {\r\n      var today = new Date();\r\n      let datetoday = today.getFullYear() + '-' + day_of_the_month(today.getMonth() + 1) + '-' + today.getDate();\r\n      //let start = moment().format('YYYY-MM-DD');\r\n      //let end = moment().format('YYYY-MM-DD');\r\n      let todaydate = today.getDate() + '-' + day_of_the_month(today.getMonth() + 1) + '-' + today.getFullYear();\r\n      setFilename('TallyChecker_Report_'+ todaydate)\r\n      console.log(datetoday)\r\n      axios.post(url, {\r\n            \"from\": datetoday,\r\n            \"to\": datetoday\r\n        }).then(json => setData(json.data.data));\r\n        setLoading(false);\r\n    }, [])\r\n\r\n\r\n    const handleEvent = (event, picker) => {\r\n        console.log(picker.startDate);\r\n    }\r\n\r\n    const handleCallback = (start, end, label) => {\r\n        let from = start.format('YYYY-MM-DD');\r\n        let to = end.format('YYYY-MM-DD');\r\n        axios.post(url, {\r\n            \"from\": from,\r\n            \"to\": to\r\n        }).then(json => setData(json.data.data));\r\n        console.log(\"from: \",from);\r\n        console.log(\"to :\",to);\r\n        setLoading(false);\r\n    }\r\n\r\n\tconst styles = { width: 260, display: \"block\", marginBottom: 10 };\r\n\r\n \treturn !loading ?\r\n   (\r\n   <div> \r\n\t{\r\n\t\t<div>\r\n\r\n\r\n\r\n\t\t<h1 style = {{color:\"white\",fontSize:\"36px\",marginLeft:\"25px\"}}>Loading Tally check Report </h1>\r\n\r\n<div>\r\n<div style = {{marginLeft:\"10%\",marginTop : \"20px\", zIndex : \"999\",position:\"relative\"}}> <ExportCSV csvData={data} fileName={filename} /> </div>\r\n<div style = {{marginLeft:\"40%\",marginTop:\"-60px\", maxWidth: \"300px\",zIndex : \"999\",position:\"relative\"}}>\r\n<h5 style = {{color:\"white\", fontSize:\"16px\"}}> Chose Date range to get the Report </h5>\r\n<DateRangePicker onEvent={handleEvent} onCallback={handleCallback}  size=\"sm\" style={styles}>\r\n  <input type=\"text\" className=\"form-control\" />\r\n</DateRangePicker>\r\n</div>\r\n\r\n</div>\r\n\t{\r\n\t<div style = {{width:\"98%\", marginTop:\"-50px\"}}>\r\n\t<MaterialTable style = {{background:\"#0F1322\",color:\"#FFF\"}} className={classes.table} size=\"small\" aria-label=\"a dense table\"\r\n\ticons={tableIcons}\t\r\n\tcolumns={[\r\n\t  { title: 'Yard', field: 'yard' },\r\n\t  {title: 'SAP Rakenumber',field: 'rakeno'},\r\n\t  {title: 'SAP Wagon Number',field: 'wagonno'},\r\n\t  { title: 'Loaded Wagon Number', field: 'wagonnumber' },\r\n\t  {title: 'SAP Batch Number',field: 'batchno'},\r\n    { title: 'Loaded Batch Number', field: 'batchnumber' },\r\n    { title: 'Weight', field: 'batchwt' },\r\n    { title: 'Size', field: 'size' },\r\n\t  {title: 'Scanned By',field: 'scannedby'},\r\n\t  {title: 'Image',field: 'url', render: rowData => { return rowData.url ?  <img src={rowData.url} style={{height: 50}}/> : \"\"}}, \r\n\t  {title: 'Anamoly',field: 'anamoly'},\r\n\t   {title: 'Action',field: ''},\r\n\t   {title: 'Taken By',field: ''},\r\n\t   {title: 'Action time',field: ''},\r\n\t]}\r\n\tdata={data}\r\n\toptions={{\r\n    search: true,\r\n    searchFieldStyle: { maxWidth: \"30%\", marginLeft: \"65%\" },\r\n    pageSize: 50,\r\n    pageSizeOptions: [50, 100, 200, 300],\r\n    showTitle: false,\r\n    toolbar: true,\r\n    paging: true,\r\n\t}}\r\n  />\r\n\t</div>\r\n\t\r\n\t\r\n\t}\r\n\t\t\r\n\t</div>\r\n      \r\n\t}\r\n\t</div> ) : <Spinner />\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}