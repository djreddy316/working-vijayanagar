{"ast":null,"code":"var _jsxFileName = \"D:\\\\vijayanagar-working\\\\working-vijayanagar\\\\src\\\\components\\\\file-upload\\\\excel-reader.js\";\nimport React, { Component } from 'react';\nimport { Fabric } from 'office-ui-fabric-react/lib/Fabric';\nimport { DefaultButton } from 'office-ui-fabric-react/lib/Button';\nimport XLSX from 'xlsx';\nimport { make_cols } from './make-columns';\nimport { SheetJSFT } from './types';\nimport { connect } from \"react-redux\";\nimport { Dashboard } from \"../assignment/assignment\";\nimport { appSelectFilteredZones, appSelectNotifications } from \"../../modals/app/selectors\";\nimport { appFetchAllEquipments, appFetchZonesData, zoneFecthWIPdetails, zoneScheduleWIP } from \"../../modals/app/thunk\";\nimport { appSetZonesFilter } from \"../../modals/app/actions\";\nimport { addRoasters, fetchRoasters } from \"../../modals/roaster/roaster-service\";\nimport axios from 'axios';\n\nclass ExcelReader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: {},\n      data: [],\n      cols: []\n    };\n    this.handleFile = this.handleFile.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.addRoaster = this.addRoaster.bind(this);\n  }\n\n  addRoaster(data) {\n    axios.post('https://xlnlyl43dd.execute-api.ap-south-1.amazonaws.com/dev/addroster', data).then(resp => {\n      console.log(resp.data);\n    });\n  }\n\n  handleChange(e) {\n    const files = e.target.files;\n    if (files && files[0]) this.setState({\n      file: files[0]\n    });\n  }\n\n  handleFile() {\n    /* Boilerplate to set up FileReader */\n    const reader = new FileReader();\n    const rABS = !!reader.readAsBinaryString;\n\n    reader.onload = e => {\n      /* Parse data */\n      const bstr = e.target.result;\n      const wb = XLSX.read(bstr, {\n        type: rABS ? 'binary' : 'array',\n        bookVBA: true\n      });\n      /* Get first worksheet */\n\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      /* Convert array of arrays */\n\n      const data = XLSX.utils.sheet_to_json(ws);\n      /* Update state */\n\n      this.setState({\n        data: data,\n        cols: make_cols(ws['!ref'])\n      }, () => {\n        /* console.log('FUN ', JSON.stringify(this.state.data, null, 2));\n        addRoasters(JSON.stringify(this.state.data, null, 2));*/\n        this.addRoaster(JSON.stringify(this.state.data, null, 2));\n        console.log('FUN ', JSON.stringify(this.state.data, null, 2));\n      });\n    };\n\n    if (rABS) {\n      reader.readAsBinaryString(this.state.file);\n    } else {\n      reader.readAsArrayBuffer(this.state.file);\n    }\n\n    ;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        color: \"black\",\n        width: \"15%\",\n        marginLeft: \"60%\"\n      },\n      type: \"file\",\n      className: \"form-control\",\n      id: \"file\",\n      accept: SheetJSFT,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        marginLeft: \"80%\",\n        marginTop: \"-25\"\n      },\n      type: \"submit\",\n      value: \"Submit\",\n      onClick: this.handleFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => ({});\n\nconst mapDispatchToProps = {\n  fetchRoasters: fetchRoasters\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ExcelReader);","map":{"version":3,"sources":["D:/vijayanagar-working/working-vijayanagar/src/components/file-upload/excel-reader.js"],"names":["React","Component","Fabric","DefaultButton","XLSX","make_cols","SheetJSFT","connect","Dashboard","appSelectFilteredZones","appSelectNotifications","appFetchAllEquipments","appFetchZonesData","zoneFecthWIPdetails","zoneScheduleWIP","appSetZonesFilter","addRoasters","fetchRoasters","axios","ExcelReader","constructor","props","state","file","data","cols","handleFile","bind","handleChange","addRoaster","post","then","resp","console","log","e","files","target","setState","reader","FileReader","rABS","readAsBinaryString","onload","bstr","result","wb","read","type","bookVBA","wsname","SheetNames","ws","Sheets","utils","sheet_to_json","JSON","stringify","readAsArrayBuffer","render","color","width","marginLeft","marginTop","mapStateToProps","ownProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Fabric } from 'office-ui-fabric-react/lib/Fabric';\nimport { DefaultButton } from 'office-ui-fabric-react/lib/Button';\nimport XLSX from 'xlsx';\nimport { make_cols } from './make-columns';\nimport { SheetJSFT } from './types';\nimport {connect} from \"react-redux\";\nimport {Dashboard} from \"../assignment/assignment\";\nimport {appSelectFilteredZones, appSelectNotifications} from \"../../modals/app/selectors\";\nimport {appFetchAllEquipments, appFetchZonesData, zoneFecthWIPdetails, zoneScheduleWIP} from \"../../modals/app/thunk\";\nimport {appSetZonesFilter} from \"../../modals/app/actions\";\nimport {addRoasters, fetchRoasters} from \"../../modals/roaster/roaster-service\";\nimport axios from 'axios';\n\nclass ExcelReader extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            file: {},\n            data: [],\n            cols: []\n        }\n        this.handleFile = this.handleFile.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\t\tthis.addRoaster = this.addRoaster.bind(this);\n    }\n\t\n\taddRoaster(data){\n\t\t\n\t\taxios.post('https://xlnlyl43dd.execute-api.ap-south-1.amazonaws.com/dev/addroster',data).then(resp => {\n\n\t\tconsole.log(resp.data);\n\n\t});\n\t}\n\n    handleChange(e) {\n        const files = e.target.files;\n        if (files && files[0]) this.setState({ file: files[0] });\n    };\n\n    handleFile() {\n        /* Boilerplate to set up FileReader */\n        const reader = new FileReader();\n        const rABS = !!reader.readAsBinaryString;\n\n        reader.onload = (e) => {\n            /* Parse data */\n            const bstr = e.target.result;\n            const wb = XLSX.read(bstr, { type: rABS ? 'binary' : 'array', bookVBA : true });\n            /* Get first worksheet */\n            const wsname = wb.SheetNames[0];\n            const ws = wb.Sheets[wsname];\n            /* Convert array of arrays */\n            const data = XLSX.utils.sheet_to_json(ws);\n            /* Update state */\n            this.setState({ data: data, cols: make_cols(ws['!ref']) }, () => {\n                 /* console.log('FUN ', JSON.stringify(this.state.data, null, 2));\n             addRoasters(JSON.stringify(this.state.data, null, 2));*/\n\t\t\t   this.addRoaster(JSON.stringify(this.state.data, null, 2));\n\t\t\t    console.log('FUN ', JSON.stringify(this.state.data, null, 2));\n            });\n\n        };\n\n        if (rABS) {\n            reader.readAsBinaryString(this.state.file);\n        } else {\n            reader.readAsArrayBuffer(this.state.file);\n        };\n    }\n\n    render() {\n        return (\n            <div >\n                <input style = {{color:\"black\",width:\"15%\",marginLeft:\"60%\"}} type=\"file\" className=\"form-control\" id=\"file\" accept={SheetJSFT} onChange={this.handleChange} />\n                <input style = {{marginLeft:\"80%\",marginTop:\"-25\"}} type='submit' value=\"Submit\" onClick={this.handleFile} />\n            </div>\n\n        )\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n\n});\n\nconst mapDispatchToProps = {\n    fetchRoasters: fetchRoasters\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExcelReader);"]},"metadata":{},"sourceType":"module"}